{{- if .Values.secrets.existingHarmonySecret }}
  {{- if or .Values.secrets.modelRegistryUrl .Values.secrets.sharedDirectoryUrl }}
    {{- fail "Error: 'secrets.existingHarmonySecret' is set, but inline secret values (modelRegistryUrl or sharedDirectoryUrl) are also provided. These options cannot be combined; remove the inline values or unset 'existingHarmonySecret'." }}
  {{- end }}
{{- else }}
  {{- if not .Values.installMinio.enabled }}
    {{- if not .Values.secrets.modelRegistryUrl }}
      {{- fail "Error: 'secrets.modelRegistryUrl' is required when installMinio.enabled is false" }}
    {{- end }}
    {{- if not .Values.secrets.sharedDirectoryUrl }}
      {{- fail "Error: 'secrets.sharedDirectoryUrl' is required when installMinio.enabled is false" }}
    {{- end }}
  {{- end }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "adaptive.harmony.secret.fullname" . }}
type: Opaque
data:
  modelRegistryUrl: {{ include "adaptive.modelRegistryUrl" . | b64enc }}
  sharedDirectoryUrl: {{ include "adaptive.sharedDirectoryUrl" . | b64enc }}
{{- end }}
  