{{- if .Values.secrets.existingHarmonySecret }}
  {{- if or .Values.secrets.modelRegistryUrl .Values.secrets.sharedDirectoryUrl }}
    {{- fail "Error: 'secrets.existingHarmonySecret' is set, but inline secret values (modelRegistryUrl or sharedDirectoryUrl) are also provided. These options cannot be combined; remove the inline values or unset 'existingHarmonySecret'." }}
  {{- end }}
{{- else }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "adaptive.harmony.secret.fullname" . }}
type: Opaque
data:
  modelRegistryUrl: {{ required "A model registry url is required!" .Values.secrets.modelRegistryUrl | b64enc }}
  sharedDirectoryUrl: {{ required "A shared directory url is required!" .Values.secrets.sharedDirectoryUrl | b64enc }}
{{- end }}
  